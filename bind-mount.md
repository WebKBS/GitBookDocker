# Bind Mount

앞서 적은 도커의 네임볼륨은 영구 데이터에 도움이 되지만, 데이터가 호스트 머신의 어디에 있는지 알수 없기 때문에 실제로 편집은 불가능하다.

(수정이나 변경사항 반영시 이미지를 다시 빌드하고 컨테이너에 등록해야함.)



바인드 마운트는 호스트 머신의 파일 시스템 경로를 컨테이너의 경로에 직접 연결하여 데이터를 공유하는 방법이다.&#x20;

도커 컨테이너와 호스트 간에 실시간으로 데이터를 공유하고, 컨테이너 외부에서도 데이터에 접근할 수 있게 한다.

소스코드를 언제든지 실시간으로 수정, 변경이 가능하다.

바인드 마운트는 영구적이고 편집 가능한데이터에 적합하다.

## 사용방법

바인드마운트는 Dockerfile 내부에서 할수있는 것이 아니다. 네임볼륨처럼 터미널에서 사용해야한다.

이미지에 영향을 주지않고 컨테이너에만 영향을 준다.&#x20;

```bash
docker run -v /host/path:/container/path [이미지]
# /host/path - 호스트 파일 경로
# /container/path - 컨테이너 경로
```



{% hint style="info" %}
바인드 마운트는 호스트 머신과 직접 연결되기 때문에 읽기 및 쓰기 성능이 높다.
{% endhint %}





## 중요점!!

{% hint style="warning" %}
도커는 로컬 호스트의 파일을 덮어쓰지 않는다.
{% endhint %}

바인드 마운트를 사용하면 호스트 머신 파일시스템을 연결하여 데이터를 공유한다고했다.

하지만 로컬 호스트에 만약 node\_modules가 없다면. 컨테이너 실행시 에러를 확인할 수 있다.

서로 데이터를 공유하며 주고 받지만 실제 작동 방식은 로컬 호스트는 로컬 호스트 환경의 구축이 제대로 되어 있어야 하기때문이다.

도커는 자체적으로 도커이미지 실행시 도커 파일에 RUN npm install이 있기때문에 node\_modules를 도커 자체에 복사되어 사용이 가능하나, 바인드 마운트시에는 서로 공유는 하지만 로컬호스트에 node\_modules가 없기때문에 이를 추가해줘야 한다.

도커 볼륨으로 node\_modules를 볼륨을 생성해줘야 한다.

```bash
docker run -v /host/path:/container/path -v /app/node_modules [이미지]
# -v /app/node_modules로 node_modules 볼륨을 설정한다.
# 이는 익명 볼륨이다.
```

\-v 볼륨 생성시 : 콜론을 사용하지 않았기 때문에(이름을 생성하지 않았기때문에) 익명볼륨이 생성된다.

익명 볼륨은 Dockerfile에서도 생성이 가능하다.&#x20;

```docker
VOLUME [ "/app/node_modules" ]
```

이처럼 사용해도 가능하다.
